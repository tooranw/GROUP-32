<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <title>My BCIT Project</title>
  <meta name="comp1800 boilerplate code" content="my bcit project">
  <meta name="author" content="BCIT">

  <!-- Bootstrap for Mobile-first, and JQuery -->
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-BmbxuPwQa2lc/FVzBcNJ7UAyJxM6wuqIj61tLrc4wSX0szH/Ev+nYRRuWlolflfl" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

  <!-- Optional styles and scripts of your own -->


</head>

<style>
  .heading {
    font-size: 25px;
    margin-right: 25px;
  }

  .fa {
    font-size: 25px;
  }

  .checked {
    color: orange;
  }

  /* Three column layout */
  .side {
    float: left;
    width: 15%;
    margin-top: 10px;
  }

  .middle {
    margin-top: 10px;
    float: left;
    width: 70%;
  }

  /* Place text to the right */
  .right {
    text-align: right;
  }

  /* Clear floats after the columns */
  .row:after {
    content: "";
    display: table;
    clear: both;
  }

  /* The bar container */
  .bar-container {
    width: 100%;
    background-color: #f1f1f1;
    text-align: center;
    color: white;
  }

  /* Individual bars */
  .bar-5 {
    width: 60%;
    height: 18px;
    background-color: #4CAF50;
  }

  .bar-4 {
    width: 30%;
    height: 18px;
    background-color: #2196F3;
  }

  .bar-3 {
    width: 10%;
    height: 18px;
    background-color: #00bcd4;
  }

  .bar-2 {
    width: 4%;
    height: 18px;
    background-color: #ff9800;
  }

  .bar-1 {
    width: 15%;
    height: 18px;
    background-color: #f44336;
  }

  /* Responsive layout - make the columns stack on top of each other instead of next to each other */
  @media (max-width: 400px) {

    .side,
    .middle {
      width: 100%;
    }

    .right {
      display: none;
    }
  }
</style>

<body>

  <!-------------------------------------->
  <!-- The following is HTML for layout -->
  <!-------------------------------------->
  <!-- Header Navigation Bar -->
  <nav class="navbar navbar-expand-lg navbar-light bg-light">
    <div class="container-fluid">
      <a class="navbar-brand" href="#">JustBuyIt</a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent"
        aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarSupportedContent">
        <ul class="navbar-nav me-auto mb-2 mb-lg-0">
          <li class="nav-item">
            <a class="nav-link active" aria-current="page" href="main.html">Home</a>
          </li>
          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-bs-toggle="dropdown"
              aria-expanded="false">
              Location
            </a>
            <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
              <li><a class="dropdown-item" href="#">Alberta - AB</a></li>
              <li><a class="dropdown-item" href="#">British Columbia - BC</a></li>
              <li><a class="dropdown-item" href="#">Manitoba - MB</a></li>
              <li><a class="dropdown-item" href="#">New Brunswick - NB</a></li>
              <li><a class="dropdown-item" href="#">Newfoundland and Labrador - NL</a></li>
              <li><a class="dropdown-item" href="#">Northwest Territories - NT</a></li>
              <li><a class="dropdown-item" href="#">Nova Scotia - NS</a></li>
              <li><a class="dropdown-item" href="#">Nunavut - NU</a></li>
              <li><a class="dropdown-item" href="#">Ontario - ON</a></li>
              <li><a class="dropdown-item" href="#">Prince Edward Island - PE</a></li>
              <li><a class="dropdown-item" href="#">Quebec - QC</a></li>
              <li><a class="dropdown-item" href="#">Saskatchewan - SK</a></li>
              <li><a class="dropdown-item" href="#">Yukon - YT</a></li>
            </ul>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="storelist.html">Find a Store</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#">Get Email Offers</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#">Customer Service</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#">Shoping Cart</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="deliveryPolicy.html">Delivery Policy</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="return policy.html">Return Policy</a>
          </li>
          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-bs-toggle="dropdown"
              aria-expanded="false">
              Language
            </a>
            <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
              <li><a class="dropdown-item" href="#">English</a></li>
              <li><a class="dropdown-item" href="#">Français</a></li>
              <li><a class="dropdown-item" href="#">中文</a></li>
            </ul>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="profile.html">My Account</a>
          </li>
        </ul>
        <form class="d-flex">
          <input class="form-control me-2" type="search" placeholder="Search" aria-label="Search">
          <button class="btn btn-outline-success" type="submit">Search</button>
        </form>
      </div>
    </div>
  </nav>

  <div class="alert alert-danger" role="alert" style="text-align: center;"><a href="covidupdate.html">
      Learn more about important COVID updates/operating hours.
    </a></div>

  <!-- <div style="width:1400px;"> -->
  <div>
    <div style="float:left; clear: both;">
      <img src="images/coffee maker.png" width="400" alt="" hspace="8"><br />
    </div>
    <br>
    <br>
    <br>
    <h2>A good coffee maker</h2>
    <h2>$38.98</h2>

    <h1 id="addToCart"> CLICK HERE TO LIKE </h1>

    <h1 id="demo"> CLICK HERE TO ADD TO CART </h1>


    <br>
    <a href="#" class="btn btn-primary">Click to Buy</a>

    <button onclick="addCoffeeMakerToCart3()">Add to cart</button>


  </div>
  <br>
  <div>
    <p>Make your favorite coffee anytime with the Black+Decker 12-Cup* Programmable Coffeemaker. QuickTouch™ Programming
      buttons make it easy to set the 24-hour auto brew feature and shave some time off of your morning routine. Other
      useful features include Sneak-A-Cup™ Technology, the 12-cup* Duralife™ glass carafe, and a washable brew basket.
      Black+Decker and the Black+Decker logo are trademarks of The Black & Decker Corporation and are used under
      license. *Cup equals approximately 5 oz. (varies by brewing technique)</p>
    <br>
    <ul>
      <li>Easily set the time and program the auto brew feature with QuickTouch</li>
      <li>Sneak-a-Cup- Temporarily stops the flow of coffee so you can pour your first cup</li>
      <li>Duralife Glass 12-cup* Carafe with Easy-grip Handle</li>
      <li>Removable, Dishwasher- Safe Filter Basket</li>
      <li>2 hour auto shutoff</li>
    </ul>

  </div>


  <span class="heading">User Rating</span>
  <span class="fa fa-star checked"></span>
  <span class="fa fa-star checked"></span>
  <span class="fa fa-star checked"></span>
  <span class="fa fa-star checked"></span>
  <span class="fa fa-star"></span>
  <p>4.1 average based on 254 reviews.</p>
  <hr style="border:3px solid #f1f1f1">

  <div class="row">
    <div class="side">
      <div>5 star</div>
    </div>
    <div class="middle">
      <div class="bar-container">
        <div class="bar-5"></div>
      </div>
    </div>
    <div class="side right">
      <div>150</div>
    </div>
    <div class="side">
      <div>4 star</div>
    </div>
    <div class="middle">
      <div class="bar-container">
        <div class="bar-4"></div>
      </div>
    </div>
    <div class="side right">
      <div>63</div>
    </div>
    <div class="side">
      <div>3 star</div>
    </div>
    <div class="middle">
      <div class="bar-container">
        <div class="bar-3"></div>
      </div>
    </div>
    <div class="side right">
      <div>15</div>
    </div>
    <div class="side">
      <div>2 star</div>
    </div>
    <div class="middle">
      <div class="bar-container">
        <div class="bar-2"></div>
      </div>
    </div>
    <div class="side right">
      <div>6</div>
    </div>
    <div class="side">
      <div>1 star</div>
    </div>
    <div class="middle">
      <div class="bar-container">
        <div class="bar-1"></div>
      </div>
    </div>
    <div class="side right">
      <div>20</div>
    </div>
  </div>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>



  <nav class="navbar fixed-bottom navbar-light bg-light">
    <div class="container-fluid">
      <a class="navbar-brand" href="#">Back to Top</a>
    </div>
  </nav>

  <!----------------------------------------------->
  <!-- JS: Boostrap, JQuery, Firebase, API related    -->
  <!----------------------------------------------->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-b5kHyXgcpbZJO/tY9Ul7kGkf1S0CWuKcCD38l8YkeH8z8QjE0GmW1gYU5S9FOnJ0" crossorigin="anonymous">
  </script>
  <script src="https://www.gstatic.com/firebasejs/8.2.9/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.2.9/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.2.9/firebase-firestore.js"></script>
  <script src="https://www.gstatic.com/firebasejs/ui/4.6.1/firebase-ui-auth.js"></script>

  <!-- Link to the api keys for your firebase project -->
  <script src="scripts/firebase_api_group32.js"></script>

  <!--------------------------------------------------------------------->
  <!-- JS files: Your own JavaScript functions included here    -->
  <!--------------------------------------------------------------------->
  <script src="scripts/my_functions.js"></script>



  <script>
    document.getElementById("demo").addEventListener("click", myFunction);

    function myFunction() {
      document.getElementById("demo").innerHTML = "YOU CLICKED ME!";
    }
  </script>

  <script>
    var ui = new firebaseui.auth.AuthUI(firebase.auth());
  </script>

  <script>
    
    // function readQuote() {
    //   db.collection("stores").doc("name")
    //     .onSnapshot(function (snap) {
    //       console.log(snap.data())
    //       document.getElementById("quote-goes-here").innerHTML = snap.data().message;
    //     })
    // }
    // readQuote();


    // function writeUserData() {

    //   firebase.auth().onAuthStateChanged(function (somebody) {
    //     console.log(somebody.uid);
    //     firebase.database().ref('users/' + somebody.uid).set({
    //       cartBalance: 38.89
    //     })
    //   })
    // }
    // writeUserData();


    function addCoffeeMakerToCart() {
      firebase.auth().onAuthStateChanged(function (somebody) {

        var newItem = db.collection("users").doc(somebody.uid);

        newItem.add({

          cart: "Coffee Maker",
          cartBalance: 38.89
        })

      })
    }


    function wirteANewUser() {
      var newUserRef = db.collection("users");
      newUserRef.add({
        currentBalance: 420,
        firstName: "Thanos",
        lastName: "Purple",
        middleName: "jrn",
        newBalance: 151105,
        username: "ThanosInfinityStones123"
      });
    }


    function addCoffeeMakerToCart2(id, addToCart) {
      document.getElementById(addToCart).addEventListener("click", function (somebody) {
        //console.log("like was clicked!");
        db.collection("users")
          .doc(somebody.uid)
          .update({
            cart: "Coffee Maker",
            cartBalance: firebase.firestore.FieldValue.increment(38.89) //increments field!

          })
          .then(function () {
            console.log("incremented the like field!");
            //showLikes(id);
          })
      })
    }

    function addCoffeeMakerToCart3() {
      //document.getElementById(addToCart).addEventListener("click", function (somebody) {
      console.log("addCoffeeMakerToCart3 was clicked!");
      firebase.auth().onAuthStateChanged(function (somebody) {
        db.collection("users").doc(somebody.uid).update({

            cart: "Coffee Maker",
            cartBalance: firebase.firestore.FieldValue.increment(38.89) //increments field!

          })
          .then(function () {
            console.log("incremented the like field!");
            //showLikes(id);
          })
      })
    }



    function getDetails() {
      // https://some.site/?id=123
      const parsedUrl = new URL(window.location.href);
      console.log(parsedUrl.searchParams.get("id")); // "123"

      // extract id from url, assign to variable
      var id = parsedUrl.searchParams.get("id");
      console.log(id);

      // use this ID to read from firestore
      db.collection("webcams")
        .doc(id) //webcam ID that we extracted
        .get() //READ asynch
        .then(function (doc) { // display details!
          var name = doc.data().fields.name;
          var geo_area = doc.data().fields.geo_local_area;
          var coord = doc.data().fields.geom.coordinates; //know your json data
          var url = doc.data().fields.url;
          $("#details-go-here").append("<h1> " + name + "</h1>");
          $("#details-go-here").append("<h1> " + geo_area + "</h1>");
          $("#details-go-here").append("<h1> " + coord + "</h1>");
          $("#details-go-here").append("<a href='" + url + "' > " + url);
          var likeid = "like" + id;
          $("#details-go-here").append("<h1 id='" + likeid + "' > CLICK HERE TO LIKE </h1>");
          addLikeListener(id, likeid);
        })
    }

    function addLikeListener(id, addToCart) {
      document.getElementById(addToCart).addEventListener("click", function () {
        //console.log("like was clicked!");
        db.collection("webcams")
          .doc(id)
          .update({
            likes: firebase.firestore.FieldValue.increment(1) //increments field!
          })
          .then(function () {
            console.log("incremented the like field!");
            showLikes(id);
          })
      })
    }

    // show likes field of the doc with "id"
    function showLikes(itemid) {
      db.collection("webcams")
        .doc(itemid)
        .get()
        .then(function (doc) {
          console.log(doc.data().fields.name);
          var likes = doc.data().likes;
          document.getElementById("likes-go-here").innerHTML = "<h1>" + likes + "</h1>";
        })
    }
  </script>


</body>

</html>